<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>우등생이 되는 수학 변형문제</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Hero 섹션 -->
        <section class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title">우등생이 되는 수학 변형문제</h1>
                <p class="hero-subtitle">틀린 이유를 분석해 개념·유형·난이도에 맞춘 변형문제를 생성합니다.</p>
                
                <div class="hero-badges">
                    <span class="badge">개념 기반 변형</span>
                    <span class="badge">난이도 자동 조절</span>
                    <span class="badge">오답 원인 분석</span>
                </div>
                
                <div class="hero-actions">
                    <a href="create.html" class="btn btn-primary btn-large">
                        <span class="btn-icon">✓</span>
                        문제 만들기 시작
                    </a>
                    <button onclick="scrollToSection('sample-problems')" class="btn btn-secondary btn-large">
                        <span class="btn-icon">📝</span>
                        샘플 문제 보기
                    </button>
                </div>
                
                <a href="#reviews-section" class="hero-link">후기 보기</a>
                
                <div class="hero-stats">
                    <div class="hero-stat-item">
                        <span class="hero-stat-number">1,234+</span>
                        <span class="hero-stat-label">생성된 문제</span>
                    </div>
                    <div class="hero-stat-item">
                        <span class="hero-stat-number">567+</span>
                        <span class="hero-stat-label">사용자</span>
                    </div>
                    <div class="hero-stat-item">
                        <span class="hero-stat-number">98%</span>
                        <span class="hero-stat-label">만족도</span>
                    </div>
                </div>
            </div>
        </section>

        <main class="main-content">
            <!-- 샘플 문제 미리보기 섹션 -->
            <section id="sample-problems" class="sample-problems-section">
                <div class="section-header">
                    <h2>샘플 문제 미리보기</h2>
                    <p class="section-subtitle">실제 생성되는 변형문제를 확인해보세요</p>
                </div>
                <div id="sampleProblemsList" class="sample-problems-list">
                    <!-- 샘플 문제가 여기에 동적으로 추가됩니다 -->
                </div>
                <script>
                    // HTML에서 직접 호출 (최후의 안전장치) - 즉시 실행
                    (function() {
                        // 기본 샘플 문제 HTML (즉시 표시)
                        const defaultSampleHTML = `
                            <div class="sample-problem-card">
                                <div class="sample-problem-tags">
                                    <span class="sample-problem-tag">초등학교 4학년</span>
                                    <span class="sample-problem-tag">1학기</span>
                                    <span class="sample-problem-tag" style="background: var(--primary-color); color: white;">큰 수</span>
                                </div>
                                <div class="sample-problem-stem">3, 0, 5, 2, 1로 만들 수 있는 가장 큰 수는?</div>
                                <div class="sample-problem-actions">
                                    <button class="sample-problem-toggle" onclick="toggleSampleAnswer(0)">
                                        <span class="toggle-text-0">정답 보기</span>
                                    </button>
                                    <button class="sample-problem-toggle" onclick="toggleSampleExplanation(0)">
                                        <span class="toggle-explanation-text-0">해설 예시</span>
                                    </button>
                                </div>
                                <div class="sample-problem-answer" id="sampleAnswer-0">
                                    <div class="answer-text"><strong>답:</strong> 53210</div>
                                </div>
                                <div class="sample-problem-explanation-box" id="sampleExplanation-0" style="display: none;">
                                    <strong>해설:</strong> 큰 수를 만들려면 큰 자리 수에 큰 숫자를 배치해야 합니다. 가장 큰 자리인 만의 자리에 5, 다음 천의 자리에 3, 백의 자리에 2, 십의 자리에 1, 일의 자리에 0을 배치하면 53210이 됩니다.
                                </div>
                            </div>
                            <div class="sample-problem-card">
                                <div class="sample-problem-tags">
                                    <span class="sample-problem-tag">초등학교 4학년</span>
                                    <span class="sample-problem-tag">2학기</span>
                                    <span class="sample-problem-tag" style="background: var(--primary-color); color: white;">분수의 덧셈과 뺄셈</span>
                                </div>
                                <div class="sample-problem-stem">사과 1/4개와 사과 2/4개를 더하면 모두 몇 개인가요?</div>
                                <div class="sample-problem-actions">
                                    <button class="sample-problem-toggle" onclick="toggleSampleAnswer(1)">
                                        <span class="toggle-text-1">정답 보기</span>
                                    </button>
                                    <button class="sample-problem-toggle" onclick="toggleSampleExplanation(1)">
                                        <span class="toggle-explanation-text-1">해설 예시</span>
                                    </button>
                                </div>
                                <div class="sample-problem-answer" id="sampleAnswer-1">
                                    <div class="answer-text"><strong>답:</strong> 3/4개</div>
                                </div>
                                <div class="sample-problem-explanation-box" id="sampleExplanation-1" style="display: none;">
                                    <strong>해설:</strong> 분모가 같으므로 분자만 더합니다: 1 + 2 = 3. 따라서 3/4개입니다.
                                </div>
                            </div>
                            <div class="sample-problem-card">
                                <div class="sample-problem-tags">
                                    <span class="sample-problem-tag">중학교 1학년</span>
                                    <span class="sample-problem-tag">1학기</span>
                                    <span class="sample-problem-tag" style="background: var(--primary-color); color: white;">소인수분해</span>
                                </div>
                                <div class="sample-problem-stem">24를 소인수분해 하세요.</div>
                                <div class="sample-problem-actions">
                                    <button class="sample-problem-toggle" onclick="toggleSampleAnswer(2)">
                                        <span class="toggle-text-2">정답 보기</span>
                                    </button>
                                    <button class="sample-problem-toggle" onclick="toggleSampleExplanation(2)">
                                        <span class="toggle-explanation-text-2">해설 예시</span>
                                    </button>
                                </div>
                                <div class="sample-problem-answer" id="sampleAnswer-2">
                                    <div class="answer-text"><strong>답:</strong> 2³ × 3 또는 2 × 2 × 2 × 3</div>
                                </div>
                                <div class="sample-problem-explanation-box" id="sampleExplanation-2" style="display: none;">
                                    <strong>해설:</strong> 24 = 2 × 2 × 2 × 3 = 2³ × 3
                                </div>
                            </div>
                        `;
                        
                        function forceRender() {
                            const container = document.getElementById('sampleProblemsList');
                            if (!container) {
                                console.warn('⚠️ [HTML 인라인] sampleProblemsList 컨테이너를 찾을 수 없음');
                                setTimeout(forceRender, 100);
                                return;
                            }
                            
                            // 컨테이너가 비어있거나 기본 주석만 있으면 기본 HTML 삽입
                            const currentContent = container.innerHTML.trim();
                            if (!currentContent || currentContent === '' || currentContent.includes('동적으로 추가됩니다') || !container.querySelector('.sample-problem-card')) {
                                console.log('🔧 [HTML 인라인] 기본 샘플 문제 HTML 직접 삽입');
                                container.innerHTML = defaultSampleHTML;
                            }
                            
                            // renderSampleProblems 함수가 있으면 호출 (더 나은 렌더링)
                            if (typeof renderSampleProblems === 'function') {
                                console.log('🔧 [HTML 인라인] renderSampleProblems 함수 호출');
                                try {
                                    renderSampleProblems();
                                } catch (e) {
                                    console.error('❌ [HTML 인라인] renderSampleProblems 호출 실패:', e);
                                }
                            } else {
                                console.warn('⚠️ [HTML 인라인] renderSampleProblems 함수 대기 중...');
                                setTimeout(forceRender, 100);
                            }
                        }
                        
                        // 즉시 실행
                        if (document.readyState === 'loading') {
                            document.addEventListener('DOMContentLoaded', function() {
                                setTimeout(forceRender, 10);
                            });
                        } else {
                            setTimeout(forceRender, 10);
                        }
                        
                        // 추가 안전장치: 여러 시점에서 재시도
                        setTimeout(forceRender, 100);
                        setTimeout(forceRender, 500);
                        setTimeout(forceRender, 1000);
                    })();
                </script>
            </section>

            <!-- 생성 과정 3단계 섹션 -->
            <section class="process-section">
                <div class="section-header">
                    <h2>생성 과정</h2>
                    <p class="section-subtitle">간단한 3단계로 맞춤형 문제를 만들어보세요</p>
                </div>
                <div class="process-steps">
                    <div class="process-step">
                        <div class="process-icon">📋</div>
                        <h3>1단계</h3>
                        <p>풀이/오답 입력</p>
                        <p class="process-detail">틀린 문제의 개념과 실수 유형을 선택하세요</p>
                    </div>
                    <div class="process-step">
                        <div class="process-icon">🔍</div>
                        <h3>2단계</h3>
                        <p>오답 원인 분석</p>
                        <p class="process-detail">AI가 정확히 어디서 막혔는지 분석합니다</p>
                    </div>
                    <div class="process-step">
                        <div class="process-icon">✨</div>
                        <h3>3단계</h3>
                        <p>변형문제 3~7개 생성</p>
                        <p class="process-detail">맞춤형 변형문제를 자동으로 생성합니다</p>
                    </div>
                </div>
            </section>

            <!-- 기능 하이라이트 섹션 -->
            <section class="features-section">
                <div class="section-header">
                    <h2>주요 기능</h2>
                    <p class="section-subtitle">학생별 맞춤형 학습을 위한 핵심 기능</p>
                </div>
                <div class="features" id="featuresContainer">
                    <!-- 기능 카드와 확장 영역은 JavaScript로 동적 생성 -->
                </div>
            </section>

            <!-- 사용자 후기 섹션 -->
            <section id="reviews-section" class="reviews-section">
                <div class="section-header">
                    <div>
                        <h2>사용자 후기</h2>
                        <p class="section-subtitle">여러분의 소중한 후기가 서비스 개선에 큰 도움이 됩니다.</p>
                    </div>
                </div>
                <div id="reviewsPreview" class="reviews-preview">
                    <!-- 후기 미리보기 3개가 여기에 동적으로 추가됩니다 -->
                </div>
                <div class="reviews-actions">
                    <button onclick="scrollToAllReviews()" class="btn btn-outline">후기 전체 보기</button>
                    <button onclick="showReviewDrawer()" class="btn btn-primary">
                        <span class="btn-icon">✏️</span>
                        후기 작성하기
                    </button>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="main-footer">
            <div class="footer-content">
                <p>© 2026 우등생이 되는 수학 변형문제. All rights reserved.</p>
                <div class="footer-links">
                    <a href="#" onclick="showFooterModal('terms'); return false;">이용약관</a>
                    <a href="#" onclick="showFooterModal('privacy'); return false;">개인정보처리방침</a>
                    <a href="#" onclick="showFooterModal('contact'); return false;">문의하기</a>
                </div>
            </div>
        </footer>

        <!-- 후기 작성 드로어 (사이드 패널) -->
        <div id="reviewDrawer" class="review-drawer">
            <div class="drawer-overlay" onclick="closeReviewDrawer()"></div>
            <div class="drawer-content">
                <div class="drawer-header">
                    <h2>후기 작성하기</h2>
                    <button class="drawer-close" onclick="closeReviewDrawer()">&times;</button>
                </div>
                <form id="reviewForm" onsubmit="submitReview(event)" class="review-form">
                    <div class="form-group">
                        <label>별점 (선택)</label>
                        <div class="star-rating">
                            <span class="star" data-rating="1">⭐</span>
                            <span class="star" data-rating="2">⭐</span>
                            <span class="star" data-rating="3">⭐</span>
                            <span class="star" data-rating="4">⭐</span>
                            <span class="star" data-rating="5">⭐</span>
                        </div>
                        <input type="hidden" name="rating" id="ratingInput">
                    </div>
                    <div class="form-group">
                        <label>한 줄 후기 <span class="required">*</span></label>
                        <input type="text" name="summary" placeholder="한 줄로 요약해주세요 (10~80자)" required minlength="10" maxlength="80">
                    </div>
                    <div class="form-group">
                        <label>자세한 후기 (선택)</label>
                        <textarea name="content" placeholder="더 자세한 후기를 작성해주세요 (0~300자)" rows="6" maxlength="300"></textarea>
                        <div class="char-count"><span id="charCount">0</span>/300</div>
                    </div>
                    <div class="form-actions">
                        <button type="button" onclick="closeReviewDrawer()" class="btn btn-outline">취소</button>
                        <button type="submit" class="btn btn-primary">작성하기</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- 푸터 링크 모달 -->
        <div id="footerModal" class="modal">
            <div class="modal-content" style="max-width: 800px;">
                <span class="modal-close" onclick="closeFooterModal()">&times;</span>
                <h2 id="footerModalTitle"></h2>
                <div id="footerModalBody" class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                    <!-- 내용이 여기에 표시됩니다 -->
                </div>
            </div>
        </div>
    </div>

    <script src="script.js" defer></script>
</body>
</html>
